<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Labyrithe</title>
</head>
</head>
    <body>
        <div id="laby">
        </div>
        <input type="button" id="btn1" value="&uarr;">
        <input type="button" id="btn2" value="&darr;">
        <input type="button" id="btn3" value="&larr;">
        <input type="button" id="btn4" value="&rarr;">

    <input type="button" value="GO" onclick="afficheLaby();"><br/><BR><BR>

    <!-- ajouter vos boutons de déplacement ici -->

    <script language="JavaScript">
        m='m'; //représente un mur
        p='p'; //représente le personnage
        b='b'; //représente le chemin
        f="f"; //représente le trophée 

        var x=1; //position initial du personnage sur l'axe X
        var y=1; //postition initial du personnage sur l'axe Y
        //tableau à double entrée représentant votre labyrinthe, vous pouvez le modifier pour comprendre le fonctionnement
        var laby = [[m,m,m,m,m,m,m,m,m,m],
                    [m,p,m,b,b,b,b,b,b,m],
                    [m,b,m,b,m,m,m,b,m,m],
                    [m,b,m,b,m,b,m,b,b,m],
                    [m,b,b,b,m,b,m,m,b,m],
                    [m,b,m,b,m,b,b,b,b,f],
                    [m,m,m,m,m,m,m,m,m,m]];
        
    
        
         
        function afficheLaby() //ne rien modifier dans cette fonction
        {
            var leLaby=document.getElementById("laby");
            insertion="<table border=0 cellspacing=0 cellpadding=0>";
         
         
            for(i=0;i<7;i++)
            {
            insertion+="<tr>";
                for(j=0;j<10;j++)
                {
                 
                    if (laby[i][j]==m)
                    {
                    insertion+="<td>";
                    insertion+="<img width='52'height='52' src='Assets/stonewall.png'>";
                    insertion+="</td>";
                    }
                    if (laby[i][j]==p)
                    {
                    insertion+="<td>";
                    insertion+="<img width='52' height='52' style='background-image:Assets/Ground.png' src='Assets/Heros.png'>";
                    insertion+="</td>";
                    }
                    if (laby[i][j]==b)
                    {
                    insertion+="<td>";
                    insertion+="<img width='52' height='52' src='Assets/Ground.png'>";
                    insertion+="</td>";
                    }

                     
                    if (laby[i][j]==f)
                    {
                    insertion+="<td>";
                    insertion+="<img width='52' height='52'src='Assets/Trophy.png'>";
                    insertion+="</td>";
                    }
                     
             
                     
                }
                insertion+="</tr>";
            }  
             
            insertion+="</table>";
            leLaby.innerHTML=insertion;
        }

        var bd = document.getElementById('laby')
        var d = 0
        var u = 0
        var r = 0
        var l = 0
       
        function touches(e){
            switch(e.code){
                case "KeyS":
                down();
                break;
                case "KeyW":
                up();
                break;
                case "KeyD":
                right();
                break;
                case "KeyA":
                left();
                break;
            }
        }
       
        function down(){
            if (laby[y + 1][x] == f){
                bd.style.borderColor = 'green';
            }
            if (laby[y + 1][x] == b){
                bd.style.borderColor = 'rgb(116, 116, 116)';
            }
            if (laby[y + 1][x] == b || laby[y + 1][x] == f){
                
                y++
                laby [y] [x] = p
                laby [y - 1] [x] = b
                afficheLaby()
            } 
            else{bd.style.borderColor = 'red';}      
        }

        function up(){
            if (laby[y - 1][x] == f){
                bd.style.borderColor = 'green';
            }
            if (laby[y - 1][x] == b){
                bd.style.borderColor = 'rgb(116, 116, 116)';
            }
            if (laby[y - 1][x] == b || laby[y - 1][x] == f){
                y--
                laby [y] [x] = p
                laby [y + 1] [x] = b
                afficheLaby()
            } 
            else{bd.style.borderColor = 'red';}
        }

        function right(){
            if (laby[y][x + 1] == f){
                bd.style.borderColor = 'green';
            }
            if (laby[y][x + 1] == b){
                bd.style.borderColor = 'rgb(116, 116, 116)';
            }
            if (laby[y][x + 1] == b || laby[y][x + 1] == f){
                x++
                laby [y] [x] = p
                laby [y] [x - 1] = b
                afficheLaby() 
            } 
            else{bd.style.borderColor = 'red';}

            
        }
        function left(){
            if (laby[y][x - 1] == f){
                bd.style.borderColor = 'green';
            }
            if (laby[y][x - 1] == b){
                bd.style.borderColor = bd.style.borderColor = 'rgb(116, 116, 116)';;
            }
            if (laby[y][x - 1] == b || laby[y][x - 1] == f){
                x--
                laby [y] [x] = p
                laby [y] [x + 1] = b
                afficheLaby()
            } 
            else{bd.style.borderColor = 'red';}  
        }
        
        window.addEventListener("keypress", touches)



        btn1.addEventListener("click", up)
        btn2.addEventListener("click", down)
        btn3.addEventListener("click", left)
        btn4.addEventListener("click", right)
            
        


        afficheLaby()
        
    </script>
</body>
</html>